{% extends 'base.html' %} {% load static %} {% block content %}

<!-- Users image and ID -->
<div class="row">
    <div class="px-3 py-3 col-sm-3">
        <div class="px-3 py-3 gravatar-image text-center">
            <img src="{% static 'img/gravatar.png' %}" alt="gravatar image">
        </div>
        <h4 class="text-center">Name: {{ user|capfirst }}</h4>
        <div class="px-2 py-2 text-center"><a href="{% url 'create_a_product' %}" class="btn btn-read-more">Donate Rugby Boots</a></div>
        <div class="px-2 py-2 text-center"><a href="#" class="btn btn-read-more">Update Personal Details</a></div>
        <div class="px-2 py-2 text-center"><a href="#" class="btn btn-read-more">Change Password</a></div>
        <div class="px-2 py-2 text-center"><a href="{% url 'single_feedback_view' %}" class="btn btn-read-more">Member Feedback</a></div>
    </div>
    <!-- User Re-boot membership summary -->
    <div class="pt-3 pb-3 col-sm-9">
        <h4>Your membership summary:</h4>
        <div class="row">
            <p class="pl-5"><strong>Date last logged on:</strong></p>
        </div>
        <div class="row">
            <p class="pl-5"><strong>Date joined Re-Boot:</strong></p>
        </div>
        <!-- Summary of Boot donations & Boot purchases -->
        <div class="container">
            <div class="jumbotron">
                <h5>Donations:</h5>
                <!-- Not Paid -->
                <div class="row row-cols-1 row-cols-md-4">
                    {% for product in products %}
                    <!-- Summary of selected rugby boot product -->
                    <div class="col mb-1">
                        <div class="panel-body">
                            <p><strong>{{ product.customer }}</strong></p>
                            <div class="product-image" style="background-image: url('{{ MEDIA_URL }}{{ product.image }}'); height:200px; width:200px"></div>
                            <p><strong>Make: </strong>{{ product.make }}</p>
                            <p><strong>Size: </strong>{{ product.size }}</p>
                            <strong>
                    <p><span class="fas fa-pound-sign"
                        aria-hidden="true"></span>{{ product.price }}</p>
                </strong>
                            <a class="btn btn-product-detail" role="button" href="{% url 'product-detail' product.id %}">Read More</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="jumbotron">
                <h5>Purchases:</h5>
                <!-- Paid -->
                {% if product.paid == True %}
                <div class="row row-cols-1 row-cols-md-4">
                    {% for product in products %}
                    <!-- Summary of selected rugby boot product -->
                    <div class="col mb-1">
                        <div class="panel-body">
                            <p><strong>{{ product.customer }}</strong></p>
                            <div class="product-image" style="background-image: url('{{ MEDIA_URL }}{{ product.image }}'); height:200px; width:200px"></div>
                            <p><strong>Make: </strong>{{ product.make }}</p>
                            <p><strong>Size: </strong>{{ product.size }}</p>
                            <strong>
                    <p><span class="fas fa-pound-sign"
                        aria-hidden="true"></span>{{ product.price }}</p>
                </strong>
                            <a class="btn btn-product-detail" role="button" href="{% url 'product-detail' product.id %}">Read More</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p>There are no rugby boot purchases to show. Please take time to browse our latest stock in the <strong>BootShop</strong>.</p>
            </div>
        </div>
    </div>
    <!-- User specific feedback -->
    <h4 class="mt-3">Your feedback:</h4>
    {% for feedback in feedbacks %}
    <div class="row">
        <div class="col-12">
            <div class="card border-primary mb-3">
                <div class="card-body">
                    <h4 class="card-title">{{ feedback.title|capfirst }}</h4>
                    <p class="card-text">{{ feedback.description|capfirst }}</p>
                    <div class="card-footer text-muted">
                        <span>{{ feedback.creator|capfirst }} | {{ feedback.created_date }}</span>
                        <a href="{% url 'single_feedback_view' feedback.id %}" class="card-link">View feedback</a>
                        <div class="inline justify-content-center mt-2">
                            <a href="{% url 'edit_a_feedback' feedback.id %}" class="px-1"><button type="button" class="btn btn-outline-info p5">Edit</button></a>
                            <form method="POST" action="{% url 'delete_a_feedback' feedback.id %}" id="delete_a_feedback" class="px-1">{% csrf_token %}<button type="submit" class="btn btn-outline-warning p5">Delete</button></form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    <!-- Pagination setting for user feedback reviews -->
    <div class="container">
       
        <ul class="pagination pagination-sm">
            {% if feedbacks.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ feedbacks.previous_page_number }}">&laquo;</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link">&laquo;</a>
            </li>
            {% endif %} {% for i in feedbacks.paginator.page_range %} {% if feedbacks.number == i %}
            <li class="page-item active">
                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
            </li>
            {% else %}
            <li class="page-item">
                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
            </li>
            {% endif %} {% endfor %} {% if feedbacks.has_next %}
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ feedbacks.next_page_number }}">&raquo;</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link">&raquo;</a>
            </li>
            {% endif %}
        </ul>
        {% endif %}
    </div>

    
</div>
{% endblock %} {% block js %}
<script>
  $(document).on('click', '#delete_a_feedback', function() {
    return confirm('Are you sure you want to delete this feedback?');
  });
</script>
{% endblock %}